type Course @entity(immutable: false) {
  "课程的链上ID (uint256)"
  id: ID!
  creator: User!
  priceInYd: BigInt!
  createdAtTimestamp: BigInt!
  "购买了此课程的学生列表"
  purchasers: [User!]! @derivedFrom(field: "coursesOwned")
  "课程的购买人数"
  purchaseCount: BigInt!
}

type User @entity(immutable: false) {
  "用户的钱包地址"
  id: ID!
  "该用户创建的课程列表"
  coursesCreated: [Course!]! @derivedFrom(field: "creator")
  "该用户购买的课程列表"
  coursesOwned: [Course!]!
}

type PlatformFee @entity(immutable: true) {
  "交易ID"
  id: ID!
  courseId: BigInt!
  course: Course!
  payer: User!
  feeAmount: BigInt!
  timestamp: BigInt!
}

type PlatformStats @entity(immutable: false) {
  "平台统计，ID固定为'platform'"
  id: ID!
  totalFees: BigInt!
  feeRate: BigInt!
  treasury: Bytes!
}
